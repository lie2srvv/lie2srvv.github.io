<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>lie2srvv</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º—è–≥–∫–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
    --accent: #00ffff;
    --bg-dark: #0f0f0f;
    --card-bg: rgba(255, 255, 255, 0.08);
    --font-main: 'Montserrat', sans-serif;
}

*{box-sizing:border-box;}
body{
  margin:0; min-height:100vh; 
  background: radial-gradient(circle at top, #2c3e50, var(--bg-dark)); 
  color:#f2f2f2; 
  font-family: var(--font-main);
  display:flex; justify-content:center; align-items:center; 
  overflow:hidden;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

canvas#snow, canvas#draw{position:fixed; inset:0; z-index:0;}
canvas#draw { pointer-events: none; opacity: 0; transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
canvas#draw.active { pointer-events: auto; opacity: 1; }

/* –ú–µ–Ω—é-–±—É—Ä–≥–µ—Ä */
.menu-btn {
    position: fixed; top: 25px; right: 25px; z-index: 100;
    width: 45px; height: 45px; cursor: pointer;
    display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 6px;
    background: var(--card-bg); backdrop-filter: blur(12px); border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.15);
    transition: all 0.3s ease;
}
.menu-btn:hover { background: rgba(255,255,255,0.15); }
.menu-btn span { width: 24px; height: 2px; background: white; transition: 0.3s; border-radius: 2px; }
.menu-btn.open span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
.menu-btn.open span:nth-child(2) { opacity: 0; }
.menu-btn.open span:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }

.nav-menu {
    position: fixed; top: 0; right: -100%; width: 280px; height: 100%;
    background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(25px);
    z-index: 99; display: flex; flex-direction: column; padding: 100px 40px;
    transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); 
    border-left: 1px solid rgba(255,255,255,0.1);
}
.nav-menu.open { right: 0; }
.nav-link {
    color: white; text-decoration: none; font-size: 22px; margin: 20px 0;
    cursor: pointer; transition: 0.3s; opacity: 0.6; font-weight: 600;
}
.nav-link:hover, .nav-link.active { opacity: 1; color: var(--accent); padding-left: 10px; }

/* –ò–Ω—Ñ–æ-–∫–∞—Ä—Ç–æ—á–∫–∞ */
.card{
  position:relative; z-index:1; background: var(--card-bg); backdrop-filter: blur(16px);
  border-radius:28px; padding:30px 35px; max-width:440px; width:90%; 
  display:flex; flex-direction:column; align-items:flex-start;
  box-shadow: 0 12px 40px rgba(0,0,0,0.5);
  border: 1px solid rgba(255,255,255,0.12);
  transition: opacity 0.6s, transform 0.6s;
}
.card.hidden { opacity: 0; transform: scale(0.95); pointer-events: none; }

h1{margin: 0 0 10px 0; font-size:26px; font-weight: 700; color:#ffffff; letter-spacing: -0.5px;}
p{line-height:1.6; margin:8px 0; color:#e0e0e0; font-weight: 400;}
.city{font-style:italic; color: var(--accent); font-weight: 600;}
.divider{
  border-top: 1px solid rgba(255,255,255,0.2); width:100%;
  margin:20px 0; opacity:0; transition:opacity 0.8s;
}
.links { display: flex; flex-direction: column; gap: 10px; }
.links a{
  color:#ffffff; text-decoration:none; font-weight:700; font-size: 15px;
  opacity: 0; transform: translateY(10px); transition: 0.6s ease;
}
.links a.visible { opacity: 1; transform: translateY(0); }
.links a:hover { color: var(--accent); text-shadow: 0 0 8px rgba(0,255,255,0.5); }

/* –ü–∞–Ω–µ–ª—å —Ä–∏—Å–æ–≤–∞–Ω–∏—è */
.draw-ui {
    position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);
    display: none; gap: 20px; align-items: center;
    background: rgba(20, 20, 20, 0.8); backdrop-filter: blur(15px);
    padding: 12px 25px; border-radius: 60px; z-index: 10;
    border: 1px solid rgba(255,255,255,0.15);
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}
.draw-ui.active { display: flex; animation: slideUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

.color-indicator {
    width: 38px; height: 38px; border-radius: 50%; 
    border: 3px solid rgba(255,255,255,0.8);
    cursor: pointer; transition: 0.3s;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
}
.color-indicator:hover { transform: scale(1.15); }

.ui-btn {
    background: rgba(255,255,255,0.1); border: none; color: white;
    padding: 10px 22px; border-radius: 30px; cursor: pointer; 
    font-size: 14px; font-weight: 700; font-family: var(--font-main);
    transition: 0.3s;
}
.ui-btn:hover { background: rgba(255,255,255,0.25); transform: translateY(-2px); }

@keyframes slideUp { from { bottom: -80px; opacity: 0; } to { bottom: 40px; opacity: 1; } }

@media(max-width:480px){
    .card{padding:25px; border-radius: 22px;} 
    h1{font-size:22px;}
    .draw-ui { width: 85%; justify-content: space-between; padding: 10px 20px; }
}
</style>
</head>
<body onclick="initAudioOnce()">

<!-- –ê—É–¥–∏–æ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) -->
<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2022/02/07/audio_848412030f.mp3?filename=lofi-chill-medium-version-15941.mp3" loop></audio>
<audio id="typeSound" src="https://www.soundjay.com/keyboard/keyboard-1.mp3"></audio>
<audio id="clickSound" src="https://www.soundjay.com/button/button-16.mp3"></audio>
<audio id="drawSound" src="https://www.soundjay.com/misc/sounds/pencil-writing-1.mp3" loop></audio>

<canvas id="snow"></canvas>
<canvas id="draw"></canvas>

<div class="menu-btn" id="menuBtn" onclick="toggleMenu()">
    <span></span><span></span><span></span>
</div>

<div class="nav-menu" id="navMenu">
    <div class="nav-link active" onclick="showPage('info')">–ü—Ä–æ—Ñ–∏–ª—å</div>
    <div class="nav-link" onclick="showPage('draw')">–•–æ–ª—Å—Ç</div>
</div>

<div class="card" id="infoCard">
  <h1 id="line1"></h1>
  <p id="line2"></p>
  <div class="divider" id="div1"></div>
  <p id="line3"></p>
  <div class="divider" id="div2"></div>
  <p id="line4"></p>
  <p id="line5"></p>
  <div class="divider" id="div3"></div>
  <div class="links" id="linksBlock">
    <p id="linksTitle" style="display:none; margin-bottom: 5px; font-weight: 700; color: #aaa;">–ú–æ–∏ —Å–æ—Ü—Å–µ—Ç–∏:</p>
    <a id="link_tg" href="https://t.me/lie2survive" target="_blank" rel="noopener noreferrer">üí¨ –¢–µ–ª–µ–≥—Ä–∞–º –ö–∞–Ω–∞–ª</a>
    <a id="link_gh" href="https://github.com/lie2srvv" target="_blank" rel="noopener noreferrer">üïπÔ∏è Github</a>
  </div>
</div>

<div class="draw-ui" id="drawUI">
    <div class="color-indicator" id="uiColorIndicator" onclick="changeColor()" title="–°–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç (W)"></div>
    <button class="ui-btn" onclick="clearCanvas()">–û—á–∏—Å—Ç–∏—Ç—å (Q)</button>
</div>

<script>
let audioInited = false;
function initAudioOnce() {
    if(audioInited) return;
    const bg = document.getElementById("bgMusic");
    bg.volume = 0.25;
    bg.play().catch(()=>{});
    audioInited = true;
}

function toggleMenu() {
    document.getElementById("navMenu").classList.toggle("open");
    document.getElementById("menuBtn").classList.toggle("open");
}

function showPage(page) {
    toggleMenu();
    const infoCard = document.getElementById("infoCard");
    const drawCanvas = document.getElementById("draw");
    const drawUI = document.getElementById("drawUI");
    const links = document.querySelectorAll('.nav-link');

    links.forEach(l => l.classList.remove('active'));

    if(page === 'info') {
        infoCard.classList.remove('hidden');
        drawCanvas.classList.remove('active');
        drawUI.classList.remove('active');
        links[0].classList.add('active');
    } else {
        infoCard.classList.add('hidden');
        drawCanvas.classList.add('active');
        drawUI.classList.add('active');
        links[1].classList.add('active');
    }
}

// --- –ü–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–∞ ---
const sequence = [
  {type: "text", id: "line1", content: "–Ø lie2srvv (@lie2srvv)"},
  {type: "text", id: "line2", content: "–í –∂–∏–∑–Ω–∏ –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä."},
  {type: "div", id: "div1"},
  {type: "text", id: "line3", content: "–ú–Ω–µ 16 –ª–µ—Ç, —É—á—É—Å—å –≤ 11 –∫–ª–∞—Å—Å–µ."},
  {type: "div", id: "div2"},
  {type: "text", id: "line4", content: "–ñ–∏–≤—É –≤ –†–æ—Å—Å–∏–∏, –≥. "},
  {type: "city"},
  {type: "text", id: "line5", content: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É—é –∏ —Ä–µ—à–∞—é –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ üå∏"},
  {type: "div", id: "div3"},
  {type: "links"}
];

let seqIndex = 0, charIndex = 0;
function runSequence() {
  if (seqIndex >= sequence.length) return;
  const item = sequence[seqIndex];
  if (item.type === "text") {
    const el = document.getElementById(item.id);
    if (charIndex < item.content.length) {
      el.textContent += item.content[charIndex++];
      const s = document.getElementById("typeSound").cloneNode();
      s.volume = 0.08; s.play();
      setTimeout(runSequence, 55);
    } else { seqIndex++; charIndex = 0; setTimeout(runSequence, 350); }
  } else if (item.type === "div") {
    document.getElementById(item.id).style.opacity = "1";
    seqIndex++; setTimeout(runSequence, 400);
  } else if (item.type === "city") {
    const span = document.createElement("span"); span.className = "city";
    document.getElementById("line4").appendChild(span);
    const letters = "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è";
    setInterval(() => {
      let c = letters[Math.floor(Math.random()*letters.length)].toUpperCase();
      for(let i=0; i<5; i++) c += letters[Math.floor(Math.random()*letters.length)];
      span.textContent = c;
    }, 45);
    seqIndex++; setTimeout(runSequence, 200);
  } else if (item.type === "links") {
    document.getElementById("linksTitle").style.display = "block";
    setTimeout(() => {
      document.getElementById("link_tg").classList.add("visible");
      setTimeout(() => { document.getElementById("link_gh").classList.add("visible"); }, 450);
    }, 300);
  }
}
setTimeout(runSequence, 1200);

// --- –°–Ω–µ–≥ ---
const snCanvas = document.getElementById("snow");
const snCtx = snCanvas.getContext("2d");
let sw, sh;
function resSnow(){ sw=snCanvas.width=window.innerWidth; sh=snCanvas.height=window.innerHeight; }
resSnow(); window.addEventListener("resize", resSnow);
const flakes = Array.from({length:70},()=>({x:Math.random()*sw,y:Math.random()*sh,r:Math.random()*2,s:Math.random()*0.4+0.3}));
function drawSnow(){
  snCtx.clearRect(0,0,sw,sh); snCtx.fillStyle = "rgba(255,255,255,0.4)";
  flakes.forEach(f => {
    snCtx.beginPath(); snCtx.arc(f.x, f.y, f.r, 0, Math.PI*2); snCtx.fill();
    f.y += f.s; if(f.y > sh) f.y = -5;
  });
  requestAnimationFrame(drawSnow);
}
drawSnow();

// --- –†–∏—Å–æ–≤–∞–Ω–∏–µ ---
const drCanvas = document.getElementById("draw");
const drCtx = drCanvas.getContext("2d");
const drawSound = document.getElementById("drawSound");

function resDraw(){
  const img = drCtx.getImageData(0,0,drCanvas.width || 1, drCanvas.height || 1);
  drCanvas.width = window.innerWidth; drCanvas.height = window.innerHeight;
  drCtx.putImageData(img, 0, 0);
}
resDraw(); window.addEventListener("resize", resDraw);

let drawing = false, lx, ly;
// 1. –ë–µ–ª—ã–π, 2-8. –¶–≤–µ—Ç–∞ —Ä–∞–¥—É–≥–∏, 9. –ì—Ä–∞–¥–∏–µ–Ω—Ç
const colors = [
    "#FFFFFF", // –ë–µ–ª—ã–π
    "#FF0000", // –ö—Ä–∞—Å–Ω—ã–π
    "#FF7F00", // –û—Ä–∞–Ω–∂–µ–≤—ã–π
    "#FFFF00", // –ñ–µ–ª—Ç—ã–π
    "#00FF00", // –ó–µ–ª–µ–Ω—ã–π
    "#0000FF", // –°–∏–Ω–∏–π
    "#4B0082", // –ò–Ω–¥–∏–≥–æ
    "#9400D3", // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
    "rainbow"  // RGB –ì—Ä–∞–¥–∏–µ–Ω—Ç
];
let curCol = 0;
let hue = 0;

function updateUI() {
    const dot = document.getElementById("uiColorIndicator");
    if(colors[curCol] === "rainbow") {
        dot.style.background = `linear-gradient(45deg, hsl(${hue},100%,50%), hsl(${(hue+60)%360},100%,50%))`;
    } else {
        dot.style.background = colors[curCol];
    }
}

function changeColor() {
    curCol = (curCol + 1) % colors.length;
    updateUI();
    const s = document.getElementById("clickSound").cloneNode();
    s.volume = 0.2; s.play();
}

function clearCanvas() {
    drCtx.clearRect(0,0,drCanvas.width,drCanvas.height);
    const s = document.getElementById("clickSound").cloneNode();
    s.volume = 0.2; s.play();
}

function startDrawing(x, y) {
  if(!drCanvas.classList.contains('active')) return;
  drawing = true; lx = x; ly = y;
  drawSound.volume = 0.4; drawSound.play();
}

function stopDrawing() { drawing = false; drawSound.pause(); lx = null; ly = null; }

drCanvas.addEventListener("mousedown", e => startDrawing(e.clientX, e.clientY));
window.addEventListener("mouseup", stopDrawing);
drCanvas.addEventListener("mousemove", e => {
  if(!drawing) return;
  drCtx.strokeStyle = colors[curCol] === "rainbow" ? `hsl(${hue},100%,50%)` : colors[curCol];
  drCtx.lineWidth = 5; drCtx.lineCap = "round"; drCtx.lineJoin = "round";
  drCtx.beginPath(); drCtx.moveTo(lx, ly); drCtx.lineTo(e.clientX, e.clientY); drCtx.stroke();
  lx = e.clientX; ly = e.clientY;
});

drCanvas.addEventListener("touchstart", e => { 
    e.preventDefault(); 
    startDrawing(e.touches[0].clientX, e.touches[0].clientY); 
}, {passive: false});
drCanvas.addEventListener("touchend", stopDrawing);
drCanvas.addEventListener("touchmove", e => {
  if(!drawing) return;
  const t = e.touches[0];
  drCtx.strokeStyle = colors[curCol] === "rainbow" ? `hsl(${hue},100%,50%)` : colors[curCol];
  drCtx.lineWidth = 5; drCtx.lineCap = "round"; drCtx.lineJoin = "round";
  drCtx.beginPath(); drCtx.moveTo(lx, ly); drCtx.lineTo(t.clientX, t.clientY); drCtx.stroke();
  lx = t.clientX; ly = t.clientY;
}, {passive: false});

document.addEventListener("keydown", e => {
    if(!drCanvas.classList.contains('active')) return;
    const key = e.key.toLowerCase();
    if(key === 'w' || key === '—Ü') changeColor();
    if(key === 'q' || key === '–π') clearCanvas();
});

function anim(t) {
  hue = (hue + 1.5) % 360;
  if(colors[curCol] === "rainbow") updateUI();
  requestAnimationFrame(anim);
}
anim();
updateUI();
</script>
</body>
</html>

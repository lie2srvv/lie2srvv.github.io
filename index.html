<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>lie2srvv</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;}
body{
  margin:0; min-height:100vh; background: radial-gradient(circle at top,#2a2a2a,#0f0f0f); 
  color:#f2f2f2; font-family:Arial,sans-serif; display:flex; justify-content:center; align-items:center; overflow:hidden;
  user-select: none;
}
canvas#snow, canvas#draw{position:fixed; inset:0; z-index:0;}
.card{
  position:relative; z-index:1; background: rgba(255,255,255,0.06); backdrop-filter: blur(14px);
  border-radius:22px; padding:20px 28px; max-width:420px; width:90%; 
  display:flex; flex-direction:column; align-items:flex-start; justify-content:flex-start;
  transition: height 0.3s ease;
  box-shadow: 0 8px 32px 0 rgba(0,0,0,0.37);
  border: 1px solid rgba(255,255,255,0.1);
}
h1{margin-top:0; font-size:23px; color:#ffffff;}
p{line-height:1.55; margin:6px 0; color:#d9d9d9; text-align:left; word-break:keep-all; min-height: 1.2em;}
.city{font-style:italic; color:#bdbdbd; display:inline-block; width:auto;}
.divider{
  border-top:2px solid rgba(255,255,255,0.3);
  width:100%;
  margin:15px 0;
  opacity:0;
  height: 0;
  transition:opacity 0.5s;
}
.links { display: flex; flex-direction: column; gap: 4px; }
.links a{display:inline-block; color:#ffffff; text-decoration:none; font-weight:bold; opacity: 0; transform: translateY(5px); transition: all 0.5s;}
.links a.visible { opacity: 1; transform: translateY(0); }
.links a:hover{text-decoration:underline; color: #00ffff;}

#hint{opacity:0.5; font-size:12px; color:#fff; margin-top:8px; display:none; flex-direction:column;}
#colorDot{display:inline-block; width:12px; height:12px; border-radius:50%; margin-left:6px; vertical-align:middle;}
#drawHint{position:absolute; top:20px; width:100%; text-align:center; color:rgba(255,255,255,0.6); font-size:14px; z-index:2; display:none; pointer-events: none;}
@media(max-width:480px){.card{padding:16px 20px; border-radius:18px;} h1{font-size:20px;}}
</style>
</head>
<body>

<!-- –ê—É–¥–∏–æ —Ä–µ—Å—É—Ä—Å—ã -->
<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2022/02/07/audio_848412030f.mp3?filename=lofi-chill-medium-version-15941.mp3" loop></audio>
<audio id="typeSound" src="https://www.soundjay.com/keyboard/keyboard-1.mp3"></audio>
<audio id="clickSound" src="https://www.soundjay.com/button/button-16.mp3"></audio>
<audio id="drawSound" src="https://www.soundjay.com/misc/sounds/pencil-writing-1.mp3" loop></audio>

<canvas id="snow"></canvas>
<canvas id="draw"></canvas>

<div id="drawHint">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ—Ä–∏—Å–æ–≤–∞—Ç—å, –µ—Å–ª–∏ —Å—Ç–∞–Ω–µ—Ç —Å–∫—É—á–Ω–æ :)</div>

<div class="card" id="card">
  <h1 id="line1"></h1>
  <p id="line2"></p>
  <div class="divider" id="div1"></div>

  <p id="line3"></p>
  <div class="divider" id="div2"></div>

  <p id="line4"></p>
  <p id="line5"></p>
  <div class="divider" id="div3"></div>

  <div class="links" id="linksBlock">
    <p id="linksTitle" style="display:none;">–ú–æ–∏ —Å—Å—ã–ª–∫–∏:</p>
    <a id="link1_tg" href="https://t.me/lie2survive" target="_blank" rel="noopener noreferrer">üí¨ –¢–µ–ª–µ–≥—Ä–∞–º –ö–∞–Ω–∞–ª</a>
    <a id="link2_gh" href="https://github.com/lie2srvv" target="_blank" rel="noopener noreferrer">üïπÔ∏è Github</a>
  </div>
  <div class="divider" id="div4"></div>

  <p id="line6"></p>
  <p id="line7"></p>

  <div id="hint">
    <span>W - —Å–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞ <span id="colorDot"></span></span>
    <span>Q - —Å–±—Ä–æ—Å–∏—Ç—å —Ä–∏—Å—É–Ω–æ–∫</span>
  </div>
</div>

<script>
const isDesktop = window.matchMedia("(hover: hover) and (pointer: fine)").matches;
const typeSound = document.getElementById("typeSound");
const drawSound = document.getElementById("drawSound");

// --- –û—á–µ—Ä–µ–¥—å –∞–Ω–∏–º–∞—Ü–∏–∏ ---
const textLines = [
  {type: "text", el:"line1", text:"–Ø lie2srvv (–¢–ì: @lie2srvv)"},
  {type: "text", el:"line2", text:"–í –∂–∏–∑–Ω–∏ –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä."},
  {type: "divider", el:"div1"},
  {type: "text", el:"line3", text:"–ú–Ω–µ 16 –ª–µ—Ç, —É—á—É—Å—å –≤ 11 –∫–ª–∞—Å—Å–µ."},
  {type: "divider", el:"div2"},
  {type: "text", el:"line4", text:"–ñ–∏–≤—É –≤ –†–æ—Å—Å–∏–∏, –≥. "},
  {type: "city", el:"line4"},
  {type: "text", el:"line5", text:"–£–≤–ª–µ–∫–∞—é—Å—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –ª—é–±–ª—é –≤—Å—è–∫–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ üå∏"},
  {type: "divider", el:"div3"},
  {type: "links"},
  {type: "divider", el:"div4"},
  {type: "text", el:"line6", text:"üí∏ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:"},
  {type: "text", el:"line7", text:"üè¶ –°–ë–ü –≤ –ª—Å –¢–ì"}
];

const letters="–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è";
const citySpan = document.createElement("span"); 
citySpan.className="city"; 

function randomCity(){
  let city = letters.charAt(Math.floor(Math.random()*letters.length)).toUpperCase();
  for(let i=1;i<6;i++) city += letters.charAt(Math.floor(Math.random()*letters.length));
  return city;
}

let iLine=0, iChar=0;
function processStep(){
  if(iLine >= textLines.length) return;
  const item = textLines[iLine];

  if(item.type === "text") {
    const el = document.getElementById(item.el);
    if(iChar < item.text.length) {
      el.textContent += item.text[iChar];
      const s = typeSound.cloneNode();
      s.volume = 0.15;
      s.play();
      iChar++;
      setTimeout(processStep, 50);
    } else {
      iLine++; iChar = 0;
      setTimeout(processStep, 300);
    }
  } 
  else if(item.type === "divider") {
    document.getElementById(item.el).style.opacity = "1";
    iLine++;
    setTimeout(processStep, 400);
  } 
  else if(item.type === "city") {
    const el = document.getElementById(item.el);
    el.appendChild(citySpan);
    setInterval(() => { citySpan.textContent = randomCity(); }, 40);
    iLine++;
    setTimeout(processStep, 200);
  }
  else if(item.type === "links") {
    document.getElementById("linksTitle").style.display = "block";
    setTimeout(() => {
        document.getElementById("link1_tg").classList.add("visible");
        setTimeout(() => {
            document.getElementById("link2_gh").classList.add("visible");
            iLine++;
            setTimeout(processStep, 600);
        }, 300);
    }, 200);
  }
}

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (—Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞ –¥–ª—è –∑–≤—É–∫–∞)
window.onload = () => { setTimeout(processStep, 800); };

// --- –°–Ω–µ–≥ ---
const canvas = document.getElementById("snow");
const ctx = canvas.getContext("2d");
let w, h;
function resizeSnow(){ w=canvas.width=window.innerWidth; h=canvas.height=window.innerHeight; }
resizeSnow(); window.addEventListener("resize", resizeSnow);

const snowflakes = Array.from({length:100},()=>({x:Math.random()*w,y:Math.random()*h,r:Math.random()*1.8+0.5,s:Math.random()*0.5+0.2}));
function snow(){
  ctx.clearRect(0,0,w,h);
  ctx.fillStyle="rgba(255,255,255,0.6)";
  snowflakes.forEach(f=>{
    ctx.beginPath(); ctx.arc(f.x,f.y,f.r,0,Math.PI*2); ctx.fill();
    f.y+=f.s; if(f.y>h){f.y=-5; f.x=Math.random()*w;}
  });
  requestAnimationFrame(snow);
}
snow();

// --- –†–∏—Å–æ–≤–∞–Ω–∏–µ ---
const drawCanvas=document.getElementById("draw");
const dctx=drawCanvas.getContext("2d");
function resizeDraw(){
  const temp = dctx.getImageData(0,0,drawCanvas.width || 1, drawCanvas.height || 1);
  drawCanvas.width=window.innerWidth; drawCanvas.height=window.innerHeight;
  try { dctx.putImageData(temp,0,0); } catch(e){}
}
resizeDraw(); window.addEventListener("resize", resizeDraw);

let drawing=false, lastX, lastY;
let colors = ["#FF0000","#FF7F00","#FFFF00","#00FF00","#00FFFF","#0000FF","#8B00FF","rainbow","#FFFFFF"];
let currentColor = 0;
let rainbowHue=0;
const colorDot = document.getElementById("colorDot");

function updateColorDot(){
  colorDot.style.background = colors[currentColor]==="rainbow" ? `hsl(${rainbowHue},100%,50%)` : colors[currentColor];
}

const drawHint = document.getElementById("drawHint");
if(isDesktop) setTimeout(() => { drawHint.style.display="block"; }, 3000);

function startAudio() {
  const bg = document.getElementById("bgMusic");
  if (bg.paused) { bg.volume = 0.4; bg.play().catch(()=>{}); }
}

function handleStart(x, y) {
  startAudio();
  drawing = true; lastX = x; lastY = y;
  drawSound.volume = 0;
  drawSound.play();
  // –ü–ª–∞–≤–Ω–æ–µ –Ω–∞—Ä–∞—Å—Ç–∞–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
  let v = 0;
  const interval = setInterval(() => {
    v += 0.1; drawSound.volume = v;
    if(v >= 0.5) clearInterval(interval);
  }, 30);

  if(isDesktop){
    document.getElementById("hint").style.display="flex";
    drawHint.style.display="none";
  }
}

function handleEnd() {
  drawing = false; 
  // –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
  let v = drawSound.volume;
  const interval = setInterval(() => {
    v -= 0.05;
    if(v <= 0) { drawSound.pause(); clearInterval(interval); }
    else { drawSound.volume = v; }
  }, 20);
  lastX=null; lastY=null;
}

drawCanvas.addEventListener("mousedown",(e)=> handleStart(e.clientX, e.clientY));
window.addEventListener("mouseup", handleEnd);
drawCanvas.addEventListener("mousemove",e=>{
  if(drawing && lastX!=null && lastY!=null){
    dctx.strokeStyle = colors[currentColor]==="rainbow"? `hsl(${rainbowHue},100%,50%)` : colors[currentColor];
    dctx.lineWidth=4; dctx.lineCap="round"; dctx.lineJoin="round";
    dctx.beginPath(); dctx.moveTo(lastX,lastY); dctx.lineTo(e.clientX,e.clientY); dctx.stroke();
    lastX=e.clientX; lastY=e.clientY;
  }
});

// Touch –ø–æ–¥–¥–µ—Ä–∂–∫–∞
drawCanvas.addEventListener("touchstart", (e) => {
    const t = e.touches[0];
    handleStart(t.clientX, t.clientY);
});
drawCanvas.addEventListener("touchend", handleEnd);
drawCanvas.addEventListener("touchmove", (e) => {
    if(drawing) {
        const t = e.touches[0];
        dctx.strokeStyle = colors[currentColor]==="rainbow"? `hsl(${rainbowHue},100%,50%)` : colors[currentColor];
        dctx.lineWidth=4; dctx.lineCap="round";
        dctx.beginPath(); dctx.moveTo(lastX,lastY); dctx.lineTo(t.clientX,t.clientY); dctx.stroke();
        lastX=t.clientX; lastY=t.clientY;
    }
});

document.addEventListener("keydown",e=>{
  const key = e.key.toLowerCase();
  if(isDesktop && (key==="q" || key==="–π")){
    dctx.clearRect(0,0,drawCanvas.width,drawCanvas.height);
  }
  if(isDesktop && (key==="w" || key==="—Ü")){
    currentColor = (currentColor+1)%colors.length;
    updateColorDot();
  }
});

let lastRainbow = 0;
function animate(t){
  if(colors[currentColor]==="rainbow" && t - lastRainbow > 20){
    rainbowHue = (rainbowHue+2)%360;
    updateColorDot();
    lastRainbow = t;
  }
  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);

document.body.addEventListener("click", () => {
    startAudio();
    document.getElementById("clickSound").play();
}, {once: true});
</script>
</body>
</html>

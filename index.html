<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>lie2srvv</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
    --accent: #00ffff;
    --bg-dark: #0f0f0f;
    --card-bg: rgba(255, 255, 255, 0.06);
}

*{box-sizing:border-box;}
body{
  margin:0; min-height:100vh; background: radial-gradient(circle at top,#2a2a2a, var(--bg-dark)); 
  color:#f2f2f2; font-family:Arial,sans-serif; display:flex; justify-content:center; align-items:center; overflow:hidden;
  user-select: none;
}

canvas#snow, canvas#draw{position:fixed; inset:0; z-index:0;}
canvas#draw { pointer-events: none; opacity: 0; transition: opacity 0.5s; }
canvas#draw.active { pointer-events: auto; opacity: 1; }

/* –ú–µ–Ω—é-–±—É—Ä–≥–µ—Ä */
.menu-btn {
    position: fixed; top: 20px; right: 20px; z-index: 100;
    width: 40px; height: 40px; cursor: pointer;
    display: flex; flex-direction: column; justify-content: space-around; padding: 8px;
    background: var(--card-bg); backdrop-filter: blur(10px); border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.1);
}
.menu-btn span { width: 100%; height: 2px; background: white; transition: 0.3s; }

.nav-menu {
    position: fixed; top: 0; right: -100%; width: 250px; height: 100%;
    background: rgba(15, 15, 15, 0.95); backdrop-filter: blur(20px);
    z-index: 99; display: flex; flex-direction: column; padding: 80px 30px;
    transition: 0.4s ease; border-left: 1px solid rgba(255,255,255,0.1);
}
.nav-menu.open { right: 0; }
.nav-link {
    color: white; text-decoration: none; font-size: 20px; margin: 15px 0;
    cursor: pointer; transition: 0.3s; opacity: 0.7;
}
.nav-link:hover, .nav-link.active { opacity: 1; color: var(--accent); }

/* –ò–Ω—Ñ–æ-–∫–∞—Ä—Ç–æ—á–∫–∞ */
.card{
  position:relative; z-index:1; background: var(--card-bg); backdrop-filter: blur(14px);
  border-radius:22px; padding:20px 28px; max-width:420px; width:90%; 
  display:flex; flex-direction:column; align-items:flex-start;
  box-shadow: 0 8px 32px 0 rgba(0,0,0,0.37);
  border: 1px solid rgba(255,255,255,0.1);
  transition: opacity 0.5s, transform 0.5s;
}
.card.hidden { opacity: 0; transform: translateY(20px); pointer-events: none; }

h1{margin-top:0; font-size:23px; color:#ffffff;}
p{line-height:1.55; margin:6px 0; color:#d9d9d9; min-height: 1.2em;}
.city{font-style:italic; color:#bdbdbd;}
.divider{
  border-top:2px solid rgba(255,255,255,0.3); width:100%;
  margin:15px 0; opacity:0; transition:opacity 0.5s;
}
.links { display: flex; flex-direction: column; gap: 8px; }
.links a{
  color:#ffffff; text-decoration:none; font-weight:bold; 
  opacity: 0; transform: translateX(-10px); transition: 0.5s;
}
.links a.visible { opacity: 1; transform: translateX(0); }

/* –ü–∞–Ω–µ–ª—å —Ä–∏—Å–æ–≤–∞–Ω–∏—è (UI) */
.draw-ui {
    position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
    display: none; gap: 15px; align-items: center;
    background: var(--card-bg); backdrop-filter: blur(10px);
    padding: 12px 20px; border-radius: 50px; z-index: 10;
    border: 1px solid rgba(255,255,255,0.1);
}
.draw-ui.active { display: flex; animation: slideUp 0.5s ease; }

.color-indicator {
    width: 30px; height: 30px; border-radius: 50%; border: 2px solid white;
    cursor: pointer; transition: transform 0.2s;
}
.color-indicator:active { transform: scale(0.9); }

.ui-btn {
    background: rgba(255,255,255,0.1); border: none; color: white;
    padding: 8px 15px; border-radius: 20px; cursor: pointer; font-size: 14px;
}
.ui-btn:hover { background: rgba(255,255,255,0.2); }

@keyframes slideUp { from { bottom: -50px; opacity: 0; } to { bottom: 30px; opacity: 1; } }

@media(max-width:480px){.card{padding:16px 20px;} h1{font-size:20px;}}
</style>
</head>
<body onclick="initAudioOnce()">

<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2022/02/07/audio_848412030f.mp3?filename=lofi-chill-medium-version-15941.mp3" loop></audio>
<audio id="typeSound" src="https://www.soundjay.com/keyboard/keyboard-1.mp3"></audio>
<audio id="clickSound" src="https://www.soundjay.com/button/button-16.mp3"></audio>
<audio id="drawSound" src="https://www.soundjay.com/misc/sounds/pencil-writing-1.mp3" loop></audio>

<canvas id="snow"></canvas>
<canvas id="draw"></canvas>

<!-- –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é -->
<div class="menu-btn" onclick="toggleMenu()">
    <span></span><span></span><span></span>
</div>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<div class="nav-menu" id="navMenu">
    <div class="nav-link active" onclick="showPage('info')">–û–±–æ –º–Ω–µ</div>
    <div class="nav-link" onclick="showPage('draw')">–†–∏—Å–æ–≤–∞–Ω–∏–µ</div>
</div>

<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1: –ò–Ω—Ñ–æ -->
<div class="card" id="infoCard">
  <h1 id="line1"></h1>
  <p id="line2"></p>
  <div class="divider" id="div1"></div>
  <p id="line3"></p>
  <div class="divider" id="div2"></div>
  <p id="line4"></p>
  <p id="line5"></p>
  <div class="divider" id="div3"></div>
  <div class="links" id="linksBlock">
    <p id="linksTitle" style="display:none; margin-bottom: 5px;">–ú–æ–∏ —Å—Å—ã–ª–∫–∏:</p>
    <a id="link_tg" href="https://t.me/lie2survive" target="_blank" rel="noopener noreferrer">üí¨ –¢–µ–ª–µ–≥—Ä–∞–º –ö–∞–Ω–∞–ª</a>
    <a id="link_gh" href="https://github.com/lie2srvv" target="_blank" rel="noopener noreferrer">üïπÔ∏è Github</a>
  </div>
</div>

<!-- UI –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è -->
<div class="draw-ui" id="drawUI">
    <div class="color-indicator" id="uiColorIndicator" onclick="changeColor()"></div>
    <button class="ui-btn" onclick="clearCanvas()">–û—á–∏—Å—Ç–∏—Ç—å</button>
</div>

<script>
let audioInited = false;
function initAudioOnce() {
    if(audioInited) return;
    const bg = document.getElementById("bgMusic");
    bg.volume = 0.3;
    bg.play().catch(()=>{});
    audioInited = true;
}

// --- –ù–∞–≤–∏–≥–∞—Ü–∏—è ---
function toggleMenu() {
    document.getElementById("navMenu").classList.toggle("open");
}

function showPage(page) {
    toggleMenu();
    const infoCard = document.getElementById("infoCard");
    const drawCanvas = document.getElementById("draw");
    const drawUI = document.getElementById("drawUI");
    const links = document.querySelectorAll('.nav-link');

    links.forEach(l => l.classList.remove('active'));

    if(page === 'info') {
        infoCard.classList.remove('hidden');
        drawCanvas.classList.remove('active');
        drawUI.classList.remove('active');
        links[0].classList.add('active');
    } else {
        infoCard.classList.add('hidden');
        drawCanvas.classList.add('active');
        drawUI.classList.add('active');
        links[1].classList.add('active');
    }
}

// --- –ü–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–∞ ---
const sequence = [
  {type: "text", id: "line1", content: "–Ø lie2srvv (–¢–ì: @lie2srvv)"},
  {type: "text", id: "line2", content: "–í –∂–∏–∑–Ω–∏ –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä."},
  {type: "div", id: "div1"},
  {type: "text", id: "line3", content: "–ú–Ω–µ 16 –ª–µ—Ç, —É—á—É—Å—å –≤ 11 –∫–ª–∞—Å—Å–µ."},
  {type: "div", id: "div2"},
  {type: "text", id: "line4", content: "–ñ–∏–≤—É –≤ –†–æ—Å—Å–∏–∏, –≥. "},
  {type: "city"},
  {type: "text", id: "line5", content: "–£–≤–ª–µ–∫–∞—é—Å—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –ª—é–±–ª—é –≤—Å—è–∫–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ üå∏"},
  {type: "div", id: "div3"},
  {type: "links"}
];

let seqIndex = 0, charIndex = 0;
function runSequence() {
  if (seqIndex >= sequence.length) return;
  const item = sequence[seqIndex];
  if (item.type === "text") {
    const el = document.getElementById(item.id);
    if (charIndex < item.content.length) {
      el.textContent += item.content[charIndex++];
      const s = document.getElementById("typeSound").cloneNode();
      s.volume = 0.1; s.play();
      setTimeout(runSequence, 50);
    } else { seqIndex++; charIndex = 0; setTimeout(runSequence, 250); }
  } else if (item.type === "div") {
    document.getElementById(item.id).style.opacity = "1";
    seqIndex++; setTimeout(runSequence, 300);
  } else if (item.type === "city") {
    const span = document.createElement("span"); span.className = "city";
    document.getElementById("line4").appendChild(span);
    const letters = "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è";
    setInterval(() => {
      let c = letters[Math.floor(Math.random()*letters.length)].toUpperCase();
      for(let i=0; i<5; i++) c += letters[Math.floor(Math.random()*letters.length)];
      span.textContent = c;
    }, 40);
    seqIndex++; setTimeout(runSequence, 150);
  } else if (item.type === "links") {
    document.getElementById("linksTitle").style.display = "block";
    setTimeout(() => {
      document.getElementById("link_tg").classList.add("visible");
      setTimeout(() => { document.getElementById("link_gh").classList.add("visible"); }, 400);
    }, 200);
  }
}
setTimeout(runSequence, 1000);

// --- –°–Ω–µ–≥ ---
const snCanvas = document.getElementById("snow");
const snCtx = snCanvas.getContext("2d");
let sw, sh;
function resSnow(){ sw=snCanvas.width=window.innerWidth; sh=snCanvas.height=window.innerHeight; }
resSnow(); window.addEventListener("resize", resSnow);
const flakes = Array.from({length:60},()=>({x:Math.random()*sw,y:Math.random()*sh,r:Math.random()*2,s:Math.random()*0.4+0.2}));
function drawSnow(){
  snCtx.clearRect(0,0,sw,sh); snCtx.fillStyle = "rgba(255,255,255,0.5)";
  flakes.forEach(f => {
    snCtx.beginPath(); snCtx.arc(f.x, f.y, f.r, 0, Math.PI*2); snCtx.fill();
    f.y += f.s; if(f.y > sh) f.y = -5;
  });
  requestAnimationFrame(drawSnow);
}
drawSnow();

// --- –†–∏—Å–æ–≤–∞–Ω–∏–µ ---
const drCanvas = document.getElementById("draw");
const drCtx = drCanvas.getContext("2d");
const drawSound = document.getElementById("drawSound");
function resDraw(){
  const img = drCtx.getImageData(0,0,drCanvas.width || 1, drCanvas.height || 1);
  drCanvas.width = window.innerWidth; drCanvas.height = window.innerHeight;
  drCtx.putImageData(img, 0, 0);
}
resDraw(); window.addEventListener("resize", resDraw);

let drawing = false, lx, ly;
let colors = ["#FFFFFF", "#FF0000", "#00FF00", "#00FFFF", "#FFFF00", "rainbow"];
let curCol = 0;
let hue = 0;

function updateUI() {
    const dot = document.getElementById("uiColorIndicator");
    dot.style.background = colors[curCol] === "rainbow" ? `hsl(${hue},100%,50%)` : colors[curCol];
}

function changeColor() {
    curCol = (curCol + 1) % colors.length;
    updateUI();
    document.getElementById("clickSound").play();
}

function clearCanvas() {
    drCtx.clearRect(0,0,drCanvas.width,drCanvas.height);
    document.getElementById("clickSound").play();
}

function startDrawing(x, y) {
  if(!drCanvas.classList.contains('active')) return;
  drawing = true; lx = x; ly = y;
  drawSound.volume = 0.3; drawSound.play();
}

function stopDrawing() { drawing = false; drawSound.pause(); lx = null; ly = null; }

drCanvas.addEventListener("mousedown", e => startDrawing(e.clientX, e.clientY));
window.addEventListener("mouseup", stopDrawing);
drCanvas.addEventListener("mousemove", e => {
  if(!drawing) return;
  drCtx.strokeStyle = colors[curCol] === "rainbow" ? `hsl(${hue},100%,50%)` : colors[curCol];
  drCtx.lineWidth = 4; drCtx.lineCap = "round";
  drCtx.beginPath(); drCtx.moveTo(lx, ly); drCtx.lineTo(e.clientX, e.clientY); drCtx.stroke();
  lx = e.clientX; ly = e.clientY;
});

drCanvas.addEventListener("touchstart", e => { 
    e.preventDefault(); 
    startDrawing(e.touches[0].clientX, e.touches[0].clientY); 
}, {passive: false});
drCanvas.addEventListener("touchend", stopDrawing);
drCanvas.addEventListener("touchmove", e => {
  if(!drawing) return;
  const t = e.touches[0];
  drCtx.strokeStyle = colors[curCol] === "rainbow" ? `hsl(${hue},100%,50%)` : colors[curCol];
  drCtx.lineWidth = 4; drCtx.lineCap = "round";
  drCtx.beginPath(); drCtx.moveTo(lx, ly); drCtx.lineTo(t.clientX, t.clientY); drCtx.stroke();
  lx = t.clientX; ly = t.clientY;
}, {passive: false});

// –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞)
document.addEventListener("keydown", e => {
    if(!drCanvas.classList.contains('active')) return;
    if(e.key.toLowerCase() === 'w' || e.key.toLowerCase() === '—Ü') changeColor();
    if(e.key.toLowerCase() === 'q' || e.key.toLowerCase() === '–π') clearCanvas();
});

function anim() {
  hue = (hue + 2) % 360;
  if(colors[curCol] === "rainbow") updateUI();
  requestAnimationFrame(anim);
}
anim();
updateUI();
</script>
</body>
</html>

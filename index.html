<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>lie2srvv</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;}
body{
  margin:0; min-height:100vh; background: radial-gradient(circle at top,#2a2a2a,#0f0f0f); 
  color:#f2f2f2; font-family:Arial,sans-serif; display:flex; justify-content:center; align-items:center; overflow:hidden;
}
canvas#snow, canvas#draw{position:fixed; inset:0; z-index:0;}
.card{
  position:relative; z-index:1; background: rgba(255,255,255,0.06); backdrop-filter: blur(14px);
  border-radius:22px; padding:20px 28px; max-width:420px; width:90%; 
  display:flex; flex-direction:column; align-items:flex-start; justify-content:flex-start;
  transition:height 0.3s ease;
}
h1{margin-top:0; font-size:23px; color:#ffffff;}
p{line-height:1.55; margin:6px 0; color:#d9d9d9; text-align:left; word-break:keep-all;}
.city{font-style:italic; color:#bdbdbd; display:inline-block; width:auto;}
.divider{
  border-top:2px solid rgba(255,255,255,0.3);
  width:100%;
  margin:15px 0;
  opacity:0;
  transition:opacity 0.5s;
}
.links a{display:inline-block; margin-top:6px; color:#ffffff; text-decoration:none; font-weight:bold;}
.links a:hover{text-decoration:underline;}
#hint{opacity:0.5; font-size:12px; color:#fff; margin-top:8px; display:none; flex-direction:column;}
#colorDot{display:inline-block; width:12px; height:12px; border-radius:50%; margin-left:6px; vertical-align:middle;}
#drawHint{position:absolute; top:20px; width:100%; text-align:center; color:rgba(255,255,255,0.6); font-size:14px; z-index:2; display:none;}
@media(max-width:480px){.card{padding:16px 20px; border-radius:18px;} h1{font-size:20px;}}
</style>
</head>
<body>
<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2022/08/25/audio_91f5b6c0d2.mp3?filename=calm-background-ambient-10848.mp3" loop autoplay></audio>
<audio id="typeSound" src="https://www.soundjay.com/keyboard/keyboard-1.mp3"></audio>
<audio id="clickSound" src="https://www.soundjay.com/button/button-16.mp3"></audio>

<canvas id="snow"></canvas>
<canvas id="draw"></canvas>

<div id="drawHint">–í—ã –º–æ–∂–µ—Ç–µ –ø–æ—Ä–∏—Å–æ–≤–∞—Ç—å, –∑–∞–∂–∞–≤ –∫—É—Ä—Å–æ—Ä, –µ—Å–ª–∏ –≤–∞–º —Å–∫—É—á–Ω–æ :)</div>

<div class="card" id="card">
  <h1 id="line1"></h1>
  <p id="line2"></p>
  <div class="divider" id="div1"></div>

  <p id="line3"></p>
  <div class="divider" id="div2"></div>

  <p id="line4"></p>
  <p id="line5"></p>
  <div class="divider" id="div3"></div>

  <div class="links" id="linksBlock"></div>
  <div class="divider" id="div4"></div>

  <p id="line6"></p>
  <p id="line7"></p>

  <div id="hint">
    <span>W - —Å–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞ <span id="colorDot"></span></span>
    <span>Q - —Å–±—Ä–æ—Å–∏—Ç—å —Ä–∏—Å—É–Ω–æ–∫</span>
  </div>
</div>

<script>
const isDesktop = window.matchMedia("(hover: hover) and (pointer: fine)").matches;

// --- –¢–µ–∫—Å—Ç ---
const textLines = [
  {el:"line1", text:"–Ø lie2srvv (–¢–ì: @lie2srvv)"},
  {el:"line2", text:"–í –∂–∏–∑–Ω–∏ –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä."},
  {divider:"div1"},
  {el:"line3", text:"–ú–Ω–µ 16 –ª–µ—Ç, —É—á—É—Å—å –≤ 11 –∫–ª–∞—Å—Å–µ."},
  {divider:"div2"},
  {el:"line4", text:"–ñ–∏–≤—É –≤ –†–æ—Å—Å–∏–∏, –≥. "},
  {el:"line5", text:"–£–≤–ª–µ–∫–∞—é—Å—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –ª—é–±–ª—é –≤—Å—è–∫–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ üå∏"},
  {divider:"div3"},
  {links:true},
  {divider:"div4"},
  {el:"line6", text:"üí∏ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:"},
  {el:"line7", text:"üè¶ –°–ë–ü –≤ –ª—Å –¢–ì"}
];

// --- –ì–æ—Ä–æ–¥ / —Ä–∞–Ω–¥–æ–º–Ω—ã–π —Ç–µ–∫—Å—Ç ---
const letters="–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è";
const citySpan = document.createElement("span"); 
citySpan.className="city"; 
function randomCity(){
  let city = letters.charAt(Math.floor(Math.random()*letters.length)).toUpperCase();
  for(let i=1;i<6;i++){
    city += letters.charAt(Math.floor(Math.random()*letters.length));
  }
  return city;
}

// --- –ü–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–∞ ---
let iLine=0, iChar=0;
function typeText(){
  if(iLine>=textLines.length) return;
  const item = textLines[iLine];
  if(item.el){
    const el=document.getElementById(item.el);
    if(iChar<item.text.length){
      el.textContent+=item.text[iChar];
      document.getElementById("typeSound").play();
      iChar++;
      setTimeout(typeText,60);
    } else {
      if(item.divider) document.getElementById(item.divider).style.opacity=1;
      if(item.el=="line4"){
        el.appendChild(citySpan);
        setInterval(()=>{citySpan.textContent=randomCity();},30);
      }
      iLine++; iChar=0;
      setTimeout(typeText,200);
    }
  } else if(item.divider){
    document.getElementById(item.divider).style.opacity=1;
    iLine++; setTimeout(typeText,200);
  } else if(item.links){
    const linksBlock = document.getElementById("linksBlock");
    linksBlock.innerHTML = `<p>–ú–æ–∏ —Å—Å—ã–ª–∫–∏:</p>
      <a href="https://t.me/lie2survive" target="_blank">üí¨ –¢–µ–ª–µ–≥—Ä–∞–º –ö–∞–Ω–∞–ª</a><br>
      <a href="https://github.com/lie2srvv" target="_blank">üïπÔ∏è Github</a>`;
    iLine++; setTimeout(typeText,200);
  }
}
typeText();

// --- –°–Ω–µ–≥ ---
const canvas = document.getElementById("snow");
const ctx = canvas.getContext("2d");
let w,h;
function resize(){ w=canvas.width=window.innerWidth; h=canvas.height=window.innerHeight; }
resize(); window.addEventListener("resize",resize);
const snowflakes = Array.from({length:120},()=>({x:Math.random()*w,y:Math.random()*h,r:Math.random()*2+0.5,s:Math.random()*0.6+0.2}));
function snow(){
  ctx.clearRect(0,0,w,h);
  ctx.fillStyle="rgba(255,255,255,0.8)";
  snowflakes.forEach(f=>{
    ctx.beginPath();
    ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    ctx.fill();
    f.y+=f.s;
    if(f.y>h){f.y=-5; f.x=Math.random()*w;}
  });
  requestAnimationFrame(snow);
}
snow();

// --- –†–∏—Å–æ–≤–∞–Ω–∏–µ ---
const drawCanvas=document.getElementById("draw");
const dctx=drawCanvas.getContext("2d");
function resizeDraw(){drawCanvas.width=window.innerWidth; drawCanvas.height=window.innerHeight;}
resizeDraw(); window.addEventListener("resize",resizeDraw);
let drawing=false, lastX, lastY;

let colors = ["#FF0000","#FF7F00","#FFFF00","#00FF00","#00FFFF","#0000FF","#8B00FF","rainbow","#FFFFFF"];
let currentColor = 0;
let rainbowHue=0;
const colorDot = document.getElementById("colorDot");

function updateColorDot(){
  if(colors[currentColor]==="rainbow"){
    colorDot.style.background = `hsl(${rainbowHue},100%,50%)`;
  } else {
    colorDot.style.background = colors[currentColor];
  }
}

// --- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è ---
const drawHint = document.getElementById("drawHint");
if(isDesktop) drawHint.style.display="block";

drawCanvas.addEventListener("mousedown",(e)=>{
  drawing=true; lastX=e.clientX; lastY=e.clientY;
  document.getElementById("clickSound").play();
  if(isDesktop){
    document.getElementById("hint").style.display="flex";
    drawHint.style.display="none";
  }
});
drawCanvas.addEventListener("mouseup",()=>{drawing=false; lastX=null; lastY=null;});
drawCanvas.addEventListener("mousemove",e=>{
  if(drawing && lastX!=null && lastY!=null){
    dctx.strokeStyle = colors[currentColor]==="rainbow"? `hsl(${rainbowHue},100%,50%)` : colors[currentColor];
    dctx.lineWidth=6; dctx.lineCap="round";
    dctx.beginPath(); dctx.moveTo(lastX,lastY); dctx.lineTo(e.clientX,e.clientY); dctx.stroke();
    lastX=e.clientX; lastY=e.clientY;
  }
});

document.addEventListener("keydown",e=>{
  const key = e.key.toLowerCase();
  if(isDesktop && (key==="q" || key==="–π")){
    dctx.clearRect(0,0,drawCanvas.width,drawCanvas.height);
    document.getElementById("hint").style.display="none";
  }
  if(isDesktop && (key==="w" || key==="—Ü")){
    currentColor = (currentColor+1)%colors.length;
    updateColorDot();
  }
});

// --- –†–∞–¥—É–∂–Ω–∞—è —Ç–æ—á–∫–∞ ---
function animateRainbow(){
  if(colors[currentColor]==="rainbow"){
    rainbowHue = (rainbowHue+1)%360;
    updateColorDot();
  }
  requestAnimationFrame(animateRainbow);
}
animateRainbow();

// --- –ö–ª–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç ---
drawCanvas.addEventListener("click",()=>{document.getElementById("clickSound").play();});
</script>
</body>
</html>

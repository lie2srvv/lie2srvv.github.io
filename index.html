<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>lie2srvv</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<style>
:root {
    --bg-deep: #0a0a0a;
    --bg-card: #141414;
    --text-main: #e0e0e0;
}
body, html { margin:0; padding:0; width:100%; height:100%; font-family:'Montserrat',sans-serif; color:var(--text-main); background:var(--bg-deep); overflow:hidden; }
#snow-canvas { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1; }
#root { position:relative; z-index:10; width:100%; height:100%; }
.card { background:var(--bg-card); border:1px solid rgba(255,255,255,0.07); border-radius:2.5rem; box-shadow:0 30px 60px -12px rgba(0,0,0,0.7); padding:2rem; max-width:400px; margin:auto; }
canvas#drawing-canvas { cursor:crosshair; touch-action:none; width:100%; height:100%; display:block; }
.color-dot { width:30px; height:30px; border-radius:50%; border:1px solid rgba(255,255,255,0.1); transition:0.2s; }
.color-dot.active { transform:scale(1.3); border-color:#fff; box-shadow:0 0 15px rgba(255,255,255,0.3); }
.rgb-btn { background: linear-gradient(45deg,#ff0000,#ff7300,#fffb00,#48ff00,#00ffd5,#002bff,#7a00ff,#ff00c8,#ff0000); background-size:400%; animation:moveGradient 5s linear infinite; border:none; color:white; font-weight:bold; text-shadow:0 1px 2px rgba(0,0,0,0.5); padding:0.3rem 0.6rem; border-radius:0.75rem; cursor:pointer; }
@keyframes moveGradient { 0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; }
}
.nav-link { width:80%; max-width:250px; padding:1rem; background:rgba(255,255,255,0.03); border-radius:1.5rem; text-align:center; cursor:pointer; }
</style>
</head>
<body>
<canvas id="snow-canvas"></canvas>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

// ======= Snow =======
const startSnow = () => {
    const canvas = document.getElementById('snow-canvas');
    const ctx = canvas.getContext('2d');
    let w,h,particles=[];
    const resize = () => { w=canvas.width=window.innerWidth; h=canvas.height=window.innerHeight; };
    window.addEventListener('resize', resize); resize();
    class Particle {
        constructor(){ this.init(); }
        init(){ this.x=Math.random()*w; this.y=Math.random()*-h; this.size=Math.random()*3+2; this.speed=Math.random()*0.5+0.3; this.opacity=Math.random()*0.4+0.2; this.offset=Math.random()*2000; }
        update(){ this.y+=this.speed; this.x+=Math.sin((Date.now()+this.offset)*0.0015)*0.5; if(this.y>h)this.init(); }
        draw(){ const g=ctx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size); g.addColorStop(0,`rgba(255,255,255,${this.opacity})`); g.addColorStop(1,'transparent'); ctx.fillStyle=g; ctx.beginPath(); ctx.arc(this.x,this.y,this.size,0,Math.PI*2); ctx.fill(); }
    }
    for(let i=0;i<70;i++)particles.push(new Particle());
    const animate=()=>{ ctx.clearRect(0,0,w,h); particles.forEach(p=>{p.update();p.draw();}); requestAnimationFrame(animate); };
    animate();
}

// ======= App =======
const App = () => {
    const [page,setPage]=useState('info');
    const [menuOpen,setMenuOpen]=useState(false);
    const [city,setCity]=useState('МОСКВА');
    const canvasRef=useRef(null);
    const currentPathRef=useRef(null);
    const [paths,setPaths]=useState([]);
    const [currentColor,setCurrentColor]=useState('#FFFFFF');
    const [brushWidth,setBrushWidth]=useState(4);
    const [isRGB,setIsRGB]=useState(false);
    const [hue,setHue]=useState(0);

    const colors=["#FFFFFF","#FF3B30","#FF9500","#FFCC00","#4CD964","#007AFF","#5856D6","#AF52DE"];
    useEffect(()=>startSnow(),[]);

    useEffect(()=>{
        const chars="абвгдеёжзийклмнопрстуфхцчшщъыьэюя";
        let frame;
        const update=()=>{
            setHue(h=> (h+1)%360);
            setCity(Array(6).fill(0).map(()=>chars[Math.floor(Math.random()*chars.length)]).join('').toUpperCase());
            if(page==='draw' && canvasRef.current){
                const ctx=canvasRef.current.getContext('2d');
                ctx.clearRect(0,0,canvasRef.current.width,canvasRef.current.height);
                const drawPath=(path)=>{
                    if(!path||!path.pts.length)return;
                    ctx.beginPath();
                    ctx.lineWidth=path.width||brushWidth;
                    ctx.lineCap='round';
                    ctx.lineJoin='round';
                    ctx.strokeStyle=path.c;
                    ctx.moveTo(path.pts[0].x,path.pts[0].y);
                    path.pts.forEach(pt=>ctx.lineTo(pt.x,pt.y));
                    ctx.stroke();
                };
                paths.forEach(drawPath);
                if(currentPathRef.current){
                    if(isRGB)currentPathRef.current.c=`hsl(${hue},100%,65%)`;
                    drawPath(currentPathRef.current);
                }
            }
            frame=requestAnimationFrame(update);
        };
        frame=requestAnimationFrame(update);
        return ()=>cancelAnimationFrame(frame);
    },[paths,page,brushWidth,isRGB,hue]);

    const getPos=(e)=>{ const r=canvasRef.current.getBoundingClientRect(); const clientX=e.clientX||(e.touches&&e.touches[0].clientX); const clientY=e.clientY||(e.touches&&e.touches[0].clientY); return {x:clientX-r.left,y:clientY-r.top}; };
    const startDrawing=(e)=>{ const col=isRGB?`hsl(${hue},100%,65%)`:currentColor; currentPathRef.current={c:col,pts:[getPos(e)],width:brushWidth}; };
    const moveDrawing=(e)=>{ if(currentPathRef.current)currentPathRef.current.pts.push(getPos(e)); };
    const endDrawing=()=>{ if(currentPathRef.current){ setPaths(prev=>[...prev,currentPathRef.current]); currentPathRef.current=null; }};

    return (
        <div className="w-full h-full flex items-center justify-center p-4">
            {/* BURGER */}
            <button onClick={()=>setMenuOpen(!menuOpen)} className="fixed top-6 right-6 z-[110] p-3 bg-[#1a1a1a] border border-white/10 rounded-2xl active:scale-90">
                <div className="w-6 h-4 flex flex-col justify-between items-end">
                    <span className={`h-0.5 bg-white transition-all ${menuOpen?'w-6 rotate-45 translate-y-2':'w-6'}`} />
                    <span className={`h-0.5 bg-white transition-all ${menuOpen?'opacity-0':'w-4'}`} />
                    <span className={`h-0.5 bg-white transition-all ${menuOpen?'w-6 -rotate-45 -translate-y-1.5':'w-5'}`} />
                </div>
            </button>
            {/* MENU */}
            <nav className={`fixed inset-0 z-[100] bg-[#0a0a0ae0] backdrop-blur-2xl transition-all duration-500 flex flex-col items-center justify-center gap-6 ${menuOpen?'translate-x-0 opacity-100':'translate-x-full opacity-0'}`}>
                <button onClick={()=>{setPage('info'); setMenuOpen(false);}} className="nav-link">Профиль</button>
                <button onClick={()=>{setPage('draw'); setMenuOpen(false);}} className="nav-link">Холст</button>
            </nav>

            <main className="w-full h-full flex items-center justify-center relative">
                {page==='info' && (
                    <div className="card animate-fade">
                        <h1 className="text-3xl font-bold mb-4">lie2srvv</h1>
                        <p className="text-sm text-[#999] mb-4">Александр, 16 лет. Увлекаюсь программированием, люблю логические задачки.</p>
                        <div className="flex justify-between mb-6">
                            <div><p className="text-[10px] uppercase tracking-widest text-[#444] font-bold">Страна</p><p className="text-sm text-white font-medium">Россия</p></div>
                            <div className="text-right"><p className="text-[10px] uppercase tracking-widest text-[#444] font-bold">Локация</p><p className="text-sm font-mono font-bold uppercase">{city}</p></div>
                        </div>
                        <a href="https://t.me/lie2survive" target="_blank" className="block text-center p-4 bg-white/5 border border-white/5 rounded-3xl font-bold text-xs uppercase tracking-widest text-[#aaa] hover:bg-white/10 transition-all active:scale-95">Telegram</a>
                    </div>
                )}
                {page==='draw' && (
                    <div className="absolute inset-0 flex flex-col justify-end items-center p-6">
                        <canvas ref={canvasRef} id="drawing-canvas" width={window.innerWidth} height={window.innerHeight}
                            onMouseDown={startDrawing} onMouseMove={moveDrawing} onMouseUp={endDrawing} onMouseLeave={endDrawing}
                            onTouchStart={startDrawing} onTouchMove={moveDrawing} onTouchEnd={endDrawing} />
                        <div className="flex gap-3 mb-4 flex-wrap justify-center">
                            {colors.map((c,i)=><button key={i} onClick={()=>{setCurrentColor(c); setIsRGB(false);}} className={`color-dot ${currentColor===c&&!isRGB?'active':''}`} style={{background:c}} />)}
                            <input type="color" value={currentColor} onChange={e=>{setCurrentColor(e.target.value); setIsRGB(false);}} className="color-dot"/>
                            <button onClick={()=>setIsRGB(!isRGB)} className={`rgb-btn ${isRGB?'ring-2 ring-white scale-110':'opacity-80'}`}>RGB</button>
                            <input type="range" min="1" max="20" value={brushWidth} onChange={e=>setBrushWidth(+e.target.value)} className="w-32" />
                            <button onClick={()=>setPaths([])} className="text-xs font-bold uppercase tracking-widest text-[#333] hover:text-white transition-colors">Очистить</button>
                        </div>
                    </div>
                )}
            </main>
        </div>
    );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
